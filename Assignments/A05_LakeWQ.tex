\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=2.54cm]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Assignment 5: Water Quality in Lakes},
            pdfauthor={Jake Greif},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\providecommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Assignment 5: Water Quality in Lakes}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Jake Greif}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
    \date{}
    \predate{}\postdate{}
  

\begin{document}
\maketitle

\hypertarget{overview}{%
\subsection{OVERVIEW}\label{overview}}

This exercise accompanies the lessons in Hydrologic Data Analysis on
water quality in lakes

\hypertarget{directions}{%
\subsection{Directions}\label{directions}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Change ``Student Name'' on line 3 (above) with your name.
\item
  Work through the steps, \textbf{creating code and output} that fulfill
  each instruction.
\item
  Be sure to \textbf{answer the questions} in this assignment document.
\item
  When you have completed the assignment, \textbf{Knit} the text and
  code into a single HTML file.
\item
  After Knitting, submit the completed exercise (HTML file) to the
  dropbox in Sakai. Add your last name into the file name (e.g.,
  ``A05\_Salk.html'') prior to submission.
\end{enumerate}

The completed exercise is due on 2 October 2019 at 9:00 am.

\hypertarget{setup}{%
\subsection{Setup}\label{setup}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Verify your working directory is set to the R project file,
\item
  Load the tidyverse, lubridate, and LAGOSNE packages.
\item
  Set your ggplot theme (can be theme\_classic or something else)
\item
  Load the LAGOSdata database and the trophic state index csv file we
  created on 2019/09/27.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "/Users/jakegreif/Duke/Fall_2019/Hydrologic_Data_Analysis"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## -- Attaching packages ----------------------------------------------------------------- tidyverse 1.2.1 --
\end{verbatim}

\begin{verbatim}
## v ggplot2 3.2.1     v purrr   0.3.2
## v tibble  2.1.3     v dplyr   0.8.3
## v tidyr   0.8.3     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0
\end{verbatim}

\begin{verbatim}
## -- Conflicts -------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(lubridate)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'lubridate'
\end{verbatim}

\begin{verbatim}
## The following object is masked from 'package:base':
## 
##     date
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(LAGOSNE)}

\KeywordTok{theme_set}\NormalTok{(}\KeywordTok{theme_classic}\NormalTok{())}
\KeywordTok{options}\NormalTok{(}\DataTypeTok{scipen =} \DecValTok{100}\NormalTok{)}

\CommentTok{# Load LAGOSNE data into R session}
\NormalTok{LAGOSdata <-}\StringTok{ }\KeywordTok{lagosne_load}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in `_f`(version = version, fpath = fpath): LAGOSNE version
## unspecified, loading version: 1.087.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Load TSI csv}
\NormalTok{LAGOStrophic <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\StringTok{"./Data/LAGOStrophic.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   lagoslakeid = col_double(),
##   sampledate = col_date(format = ""),
##   chla = col_double(),
##   tp = col_double(),
##   secchi = col_double(),
##   gnis_name = col_character(),
##   lake_area_ha = col_double(),
##   state = col_character(),
##   state_name = col_character(),
##   sampleyear = col_double(),
##   samplemonth = col_double(),
##   season = col_double(),
##   TSI.chl = col_double(),
##   TSI.secchi = col_double(),
##   TSI.tp = col_double(),
##   trophic.class = col_character()
## )
\end{verbatim}

\hypertarget{trophic-state-index}{%
\subsection{Trophic State Index}\label{trophic-state-index}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{4}
\tightlist
\item
  Similar to the trophic.class column we created in class (determined
  from TSI.chl values), create two additional columns in the data frame
  that determine trophic class from TSI.secchi and TSI.tp (call these
  trophic.class.secchi and trophic.class.tp).
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Add secchi TSI column}
\NormalTok{LAGOStrophic <-}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(LAGOStrophic, }\DataTypeTok{trophic.class.secchi =} 
           \KeywordTok{ifelse}\NormalTok{(TSI.secchi }\OperatorTok{<}\StringTok{ }\DecValTok{40}\NormalTok{, }\StringTok{"Oligotrophic"}\NormalTok{, }
                   \KeywordTok{ifelse}\NormalTok{(TSI.secchi }\OperatorTok{<}\StringTok{ }\DecValTok{50}\NormalTok{, }\StringTok{"Mesotrophic"}\NormalTok{,}
                          \KeywordTok{ifelse}\NormalTok{(TSI.secchi }\OperatorTok{<}\StringTok{ }\DecValTok{70}\NormalTok{, }\StringTok{"Eutrophic"}\NormalTok{, }
                                 \StringTok{"Hypereutrophic"}\NormalTok{))))}

\CommentTok{# Add TP TSI column}
\NormalTok{LAGOStrophic <-}\StringTok{ }
\StringTok{  }\KeywordTok{mutate}\NormalTok{(LAGOStrophic, }\DataTypeTok{trophic.class.tp =} 
           \KeywordTok{ifelse}\NormalTok{(TSI.tp }\OperatorTok{<}\StringTok{ }\DecValTok{40}\NormalTok{, }\StringTok{"Oligotrophic"}\NormalTok{, }
                   \KeywordTok{ifelse}\NormalTok{(TSI.tp }\OperatorTok{<}\StringTok{ }\DecValTok{50}\NormalTok{, }\StringTok{"Mesotrophic"}\NormalTok{,}
                          \KeywordTok{ifelse}\NormalTok{(TSI.tp }\OperatorTok{<}\StringTok{ }\DecValTok{70}\NormalTok{, }\StringTok{"Eutrophic"}\NormalTok{,}
                                 \StringTok{"Hypereutrophic"}\NormalTok{))))}

\CommentTok{# Convert to factor}
\NormalTok{LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class.secchi <-}\StringTok{ }
\StringTok{  }\KeywordTok{factor}\NormalTok{(LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class.secchi,}
         \DataTypeTok{levels =} \KeywordTok{c}\NormalTok{(}\StringTok{"Oligotrophic"}\NormalTok{, }\StringTok{"Mesotrophic"}\NormalTok{,}
                    \StringTok{"Eutrophic"}\NormalTok{, }\StringTok{"Hypereutrophic"}\NormalTok{))}

\NormalTok{LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class.tp <-}\StringTok{ }
\StringTok{  }\KeywordTok{factor}\NormalTok{(LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class.tp,}
         \DataTypeTok{levels =} \KeywordTok{c}\NormalTok{(}\StringTok{"Oligotrophic"}\NormalTok{, }\StringTok{"Mesotrophic"}\NormalTok{,}
                    \StringTok{"Eutrophic"}\NormalTok{, }\StringTok{"Hypereutrophic"}\NormalTok{))}

\NormalTok{LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class <-}\StringTok{ }
\StringTok{  }\KeywordTok{factor}\NormalTok{(LAGOStrophic}\OperatorTok{$}\NormalTok{trophic.class,}
         \DataTypeTok{levels =} \KeywordTok{c}\NormalTok{(}\StringTok{"Oligotrophic"}\NormalTok{, }\StringTok{"Mesotrophic"}\NormalTok{,}
                    \StringTok{"Eutrophic"}\NormalTok{, }\StringTok{"Hypereutrophic"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{5}
\tightlist
\item
  How many observations fall into the four trophic state categories for
  the three metrics (trophic.class, trophic.class.secchi,
  trophic.class.tp)? Hint: \texttt{count} function.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic    3298
## 2 Mesotrophic    15413
## 3 Eutrophic      41861
## 4 Hypereutrophic 14379
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class.secchi)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic   16110
## 2 Mesotrophic    25083
## 3 Eutrophic      28659
## 4 Hypereutrophic  5099
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class.tp)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic   19861
## 2 Mesotrophic    23023
## 3 Eutrophic      24839
## 4 Hypereutrophic  7228
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{6}
\tightlist
\item
  What proportion of total observations are considered eutrohic or
  hypereutrophic according to the three different metrics
  (trophic.class, trophic.class.secchi, trophic.class.tp)?
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic    3298
## 2 Mesotrophic    15413
## 3 Eutrophic      41861
## 4 Hypereutrophic 14379
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{41861}\OperatorTok{+}\DecValTok{14379}\NormalTok{)}\OperatorTok{/}\DecValTok{74951}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.7503569
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class.secchi)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic   16110
## 2 Mesotrophic    25083
## 3 Eutrophic      28659
## 4 Hypereutrophic  5099
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{28659}\OperatorTok{+}\DecValTok{5099}\NormalTok{)}\OperatorTok{/}\DecValTok{74951}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.4504009
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{count}\NormalTok{(LAGOStrophic, }\DataTypeTok{vars =}\NormalTok{ trophic.class.tp)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 4 x 2
##   vars               n
##   <fct>          <int>
## 1 Oligotrophic   19861
## 2 Mesotrophic    23023
## 3 Eutrophic      24839
## 4 Hypereutrophic  7228
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{24839}\OperatorTok{+}\DecValTok{7228}\NormalTok{)}\OperatorTok{/}\DecValTok{73951}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.433625
\end{verbatim}

Which of these metrics is most conservative in its designation of
eutrophic conditions? Why might this be?

\begin{quote}
The proportions of eutrophic or hypereutrophic conditions to the total
number of observations for trophic.class, trophic.class.secchi, and
trophic.class.tp are 75\%, 45\%, and 43\%, respectively. Total
phosphorus is the most conservative in its designation of eutrophic
conditions because it changes with the seasons and is typically only
used in the summer months as a measure to calculate TPI.
\end{quote}

Note: To take this further, a researcher might determine which trophic
classes are susceptible to being differently categorized by the
different metrics and whether certain metrics are prone to categorizing
trophic class as more or less eutrophic. This would entail more complex
code.

\hypertarget{nutrient-concentrations}{%
\subsection{Nutrient Concentrations}\label{nutrient-concentrations}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{7}
\tightlist
\item
  Create a data frame that includes the columns lagoslakeid, sampledate,
  tn, tp, state, and state\_name. Mutate this data frame to include
  sampleyear and samplemonth columns as well. Call this data frame
  LAGOSNandP.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Exploring the data types that are available}
\NormalTok{LAGOSlocus <-}\StringTok{ }\NormalTok{LAGOSdata}\OperatorTok{$}\NormalTok{locus}
\NormalTok{LAGOSstate <-}\StringTok{ }\NormalTok{LAGOSdata}\OperatorTok{$}\NormalTok{state}
\NormalTok{LAGOSnutrient <-}\StringTok{ }\NormalTok{LAGOSdata}\OperatorTok{$}\NormalTok{epi_nutr}

\CommentTok{# Tell R to treat lakeid as a factor, not a numeric value}
\NormalTok{LAGOSlocus}\OperatorTok{$}\NormalTok{lagoslakeid <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(LAGOSlocus}\OperatorTok{$}\NormalTok{lagoslakeid)}
\NormalTok{LAGOSnutrient}\OperatorTok{$}\NormalTok{lagoslakeid <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(LAGOSnutrient}\OperatorTok{$}\NormalTok{lagoslakeid)}

\CommentTok{# Join data frames}
\NormalTok{LAGOSlocations <-}\StringTok{ }\KeywordTok{left_join}\NormalTok{(LAGOSlocus, LAGOSstate, }\DataTypeTok{by =} \StringTok{"state_zoneid"}\NormalTok{)}

\CommentTok{# Create LAGOSNandP data frame}
\NormalTok{LAGOSNandP <-}\StringTok{ }\KeywordTok{left_join}\NormalTok{(LAGOSnutrient, LAGOSlocations,}
                        \DataTypeTok{by =} \StringTok{"lagoslakeid"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{select}\NormalTok{(}\StringTok{"lagoslakeid"}\NormalTok{, }\StringTok{"sampledate"}\NormalTok{, }\StringTok{"tn"}\NormalTok{,}
           \StringTok{"tp"}\NormalTok{, }\StringTok{"state"}\NormalTok{, }\StringTok{"state_name"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{sampleyear =} \KeywordTok{year}\NormalTok{(sampledate), }
         \DataTypeTok{samplemonth =} \KeywordTok{month}\NormalTok{(sampledate))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Column `lagoslakeid` joining factors with different levels,
## coercing to character vector
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{(LAGOSNandP}\OperatorTok{$}\NormalTok{samplemonth)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{LAGOSNandP}\OperatorTok{$}\NormalTok{samplemonth <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(LAGOSNandP}\OperatorTok{$}\NormalTok{samplemonth)}
\NormalTok{LAGOSNandP}\OperatorTok{$}\NormalTok{sampleyear <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(LAGOSNandP}\OperatorTok{$}\NormalTok{sampleyear)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{8}
\tightlist
\item
  Create two violin plots comparing TN and TP concentrations across
  states. Include a 50th percentile line inside the violins.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TN violin graph}
\NormalTok{stateTNviolin <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tn)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Nitrogen (mg/L)"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_y_continuous}\NormalTok{(}\DataTypeTok{limits =} \KeywordTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{5000}\NormalTok{)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_violin}\NormalTok{(}\DataTypeTok{draw_quantiles =} \FloatTok{0.50}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTNviolin)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 774906 rows containing non-finite values (stat_ydensity).
\end{verbatim}

\begin{verbatim}
## Warning in regularize.values(x, y, ties, missing(ties)): collapsing to
## unique 'x' values

## Warning in regularize.values(x, y, ties, missing(ties)): collapsing to
## unique 'x' values

## Warning in regularize.values(x, y, ties, missing(ties)): collapsing to
## unique 'x' values
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-5-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TP violin graph}
\NormalTok{stateTPviolin <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tp)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Phosphorus (mg/L)"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_y_continuous}\NormalTok{(}\DataTypeTok{limits =} \KeywordTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{200}\NormalTok{)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_violin}\NormalTok{(}\DataTypeTok{draw_quantiles =} \FloatTok{0.50}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTPviolin)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 676460 rows containing non-finite values (stat_ydensity).

## Warning: collapsing to unique 'x' values

## Warning: collapsing to unique 'x' values
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-5-2.pdf}

Which states have the highest and lowest median concentrations?

\begin{quote}
TN: Iowa has the highest, and Maine has the lowest.
\end{quote}

\begin{quote}
TP: Iowa has the highest, and Maine has the lowest.
\end{quote}

Which states have the highest and lowest concentration ranges?

\begin{quote}
TN: Iowa has the highest, and Vermont has the lowest.
\end{quote}

\begin{quote}
TP: Illinois has the highest, and Pennsylvania has the lowest.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{9}
\tightlist
\item
  Create two jitter plots comparing TN and TP concentrations across
  states, with samplemonth as the color. Choose a color palette other
  than the ggplot default.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TN jitter plot}
\NormalTok{stateTNjitter <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tn, }\DataTypeTok{color =}\NormalTok{ samplemonth)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_jitter}\NormalTok{(}\DataTypeTok{alpha =} \FloatTok{0.3}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Nitrogen (mg/L)"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"Month"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"top"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_color_viridis_d}\NormalTok{(}\DataTypeTok{option =} \StringTok{"magma"}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTNjitter)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 774226 rows containing missing values (geom_point).
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-6-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TP jitter plot}
\NormalTok{stateTPjitter <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tp, }\DataTypeTok{color =}\NormalTok{ samplemonth)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_jitter}\NormalTok{(}\DataTypeTok{alpha =} \FloatTok{0.3}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Phosphorus (mg/L)"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"Month"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"top"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_color_viridis_d}\NormalTok{(}\DataTypeTok{option =} \StringTok{"magma"}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTPjitter)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 672861 rows containing missing values (geom_point).
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-6-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Find counts of measurements by state}
\NormalTok{LAGOSN <-}\StringTok{ }\KeywordTok{select}\NormalTok{(LAGOSNandP, }\OperatorTok{-}\StringTok{"tp"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{na.omit}\NormalTok{()}

\KeywordTok{count}\NormalTok{(LAGOSN, }\DataTypeTok{var =}\NormalTok{ state)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 17 x 2
##    var       n
##    <chr> <int>
##  1 CT      916
##  2 IA     2649
##  3 IL       46
##  4 IN       57
##  5 MA       95
##  6 ME      762
##  7 MI      885
##  8 MN     8604
##  9 MO    11503
## 10 NH       19
## 11 NJ       10
## 12 NY     8091
## 13 OH     1502
## 14 PA     1044
## 15 RI     2836
## 16 VT        3
## 17 WI     2416
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{TN.count.by.state <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSN, }\DataTypeTok{var =}\NormalTok{ samplemonth, state)}

\NormalTok{LAGOSP <-}\StringTok{ }\KeywordTok{select}\NormalTok{(LAGOSNandP, }\OperatorTok{-}\StringTok{"tn"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{na.omit}\NormalTok{()}

\KeywordTok{count}\NormalTok{(LAGOSP, }\DataTypeTok{var =}\NormalTok{ state)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 17 x 2
##    var       n
##    <chr> <int>
##  1 CT     1222
##  2 IA     2920
##  3 IL     2632
##  4 IN     1340
##  5 MA      657
##  6 ME    11987
##  7 MI    10250
##  8 MN    11186
##  9 MO    11786
## 10 NH     8164
## 11 NJ      516
## 12 NY    21343
## 13 OH      175
## 14 PA     1240
## 15 RI     3612
## 16 VT     7980
## 17 WI    45743
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{TP.count.by.state <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSP, }\DataTypeTok{var =}\NormalTok{ samplemonth, state)}
\end{Highlighting}
\end{Shaded}

Which states have the most samples? How might this have impacted total
ranges from \#9?

\begin{quote}
TN: Missouri has the most TN samples.
\end{quote}

\begin{quote}
TP: Wisconsin has the most TP samples.
\end{quote}

\begin{quote}
This likely impacted the total ranges from \#9 because the more samples
that are taken, the more likely it is that some will be outliers.
Moreover, TN and TP concentrations likely flucuate from season to
season, so if the samples were taken throughout the year the range is
likely to be greater, versus collecting samples during only a few
months.
\end{quote}

Which months are sampled most extensively? Does this differ among
states?

\begin{quote}
TN: July and August are sampled most extensively.
\end{quote}

\begin{quote}
TP: July and August are sampled most extensively.
\end{quote}

\begin{quote}
Some states have consistent sampling throughout the summer (May-August),
but generally all states sample the most in July and August.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{10}
\tightlist
\item
  Create two jitter plots comparing TN and TP concentrations across
  states, with sampleyear as the color. Choose a color palette other
  than the ggplot default.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TN jitter plot}
\NormalTok{stateTNjitter.yr <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tn, }\DataTypeTok{color =}\NormalTok{ sampleyear)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_jitter}\NormalTok{(}\DataTypeTok{alpha =} \FloatTok{0.3}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Nitrogen (mg/L)"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"Year"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"right"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_color_viridis_d}\NormalTok{(}\DataTypeTok{option =} \StringTok{"magma"}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTNjitter.yr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 774226 rows containing missing values (geom_point).
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-7-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# TP jitter plot}
\NormalTok{stateTPjitter.yr <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(LAGOSNandP, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ state, }\DataTypeTok{y =}\NormalTok{ tp, }\DataTypeTok{color =}\NormalTok{ sampleyear)) }\OperatorTok{+}
\StringTok{  }\KeywordTok{geom_jitter}\NormalTok{(}\DataTypeTok{alpha =} \FloatTok{0.3}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{labs}\NormalTok{(}\DataTypeTok{x =} \StringTok{"State"}\NormalTok{, }\DataTypeTok{y =} \StringTok{"Total Phosphorus (mg/L)"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"Year"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{legend.position =} \StringTok{"right"}\NormalTok{) }\OperatorTok{+}
\StringTok{  }\KeywordTok{scale_color_viridis_d}\NormalTok{(}\DataTypeTok{option =} \StringTok{"magma"}\NormalTok{)}
\KeywordTok{print}\NormalTok{(stateTPjitter.yr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Removed 672861 rows containing missing values (geom_point).
\end{verbatim}

\includegraphics{A05_LakeWQ_files/figure-latex/unnamed-chunk-7-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{TN.count.year <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSN, }\DataTypeTok{var =}\NormalTok{ sampleyear)}
\NormalTok{TP.count.year <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSP, }\DataTypeTok{var =}\NormalTok{ sampleyear)}

\NormalTok{TN.year.state <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSN, }\DataTypeTok{var =}\NormalTok{ sampleyear, state)}
\NormalTok{TP.year.state <-}\StringTok{ }\KeywordTok{count}\NormalTok{(LAGOSP, }\DataTypeTok{var =}\NormalTok{ sampleyear, state)}
\end{Highlighting}
\end{Shaded}

Which years are sampled most extensively? Does this differ among states?

\begin{quote}
TN: 2009
\end{quote}

\begin{quote}
TP: 2009
\end{quote}

\begin{quote}
The majority of states performed their most extensive sampling in the
second half of the 2000s, primarily 2006-2009. However, the most
extensive TP sampling years were not consistent, ranging from 1976 to
2010. For TP, Minnesota did their most extensive long-term sampling in
the 1980s.
\end{quote}

\hypertarget{reflection}{%
\subsection{Reflection}\label{reflection}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{11}
\tightlist
\item
  What are 2-3 conclusions or summary points about lake water quality
  you learned through your analysis?
\end{enumerate}

\begin{quote}
There are a variety of ways to measure lake water quality, but they are
not perfect. Therefore, it's important to use multiple measures to get
the most complete picture of lake quality.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{12}
\tightlist
\item
  What data, visualizations, and/or models supported your conclusions
  from 12?
\end{enumerate}

\begin{quote}
All of lesson 9, and looking at the data visualized as violin, jitter,
and bar graphs. The comparison of the TSI values made the conclusions
mentioned above clear and easy to comprehend.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{13}
\tightlist
\item
  Did hands-on data analysis impact your learning about water quality
  relative to a theory-based lesson? If so, how?
\end{enumerate}

\begin{quote}
Yes, but I think that the TSI portion of the lessons was based in some
theory, so I feel like there was a lot of overlap between hands-on data
analysis and the theory behind our analysis. Being able to manipulate
the data myself allowed me to get familiar with it at my own pace, and I
was able to think about why the data is the way it is by comparing it to
my prior theory-based lessons.
\end{quote}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{14}
\tightlist
\item
  How did the real-world data compare with your expectations from
  theory?
\end{enumerate}

\begin{quote}
As I mentioned in \#14, I felt that there was a lot of overlap for this
section, so this is a difficult question to answer. I know that
quantifying lake quality is not a perfect science, so my understanding
of the ``theory'' is that it is difficult to generalize and pin-down
quantitative definitions of lake quality in the context of trophic
states. Therefore, my impression of real-world data met my expectations,
for the most part.
\end{quote}


\end{document}
